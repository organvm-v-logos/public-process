---
layout: default
title: "Connections"
permalink: /connections/
---

# Cross-Reference Map

How essays connect to repositories across the eight-organ system. Data generated by the [essay-pipeline](https://github.com/organvm-v-logos/essay-pipeline) indexer.

---

## Most-Connected Repos

{% assign xref = site.data["cross-references"] %}
{% assign repo_counts = "" %}
{% for entry in xref.entries %}
  {% for repo in entry[1].related_repos %}
    {% assign repo_counts = repo_counts | append: repo | append: "|||" %}
  {% endfor %}
{% endfor %}

{% assign repo_list = repo_counts | split: "|||" | sort %}
{% assign prev = "" %}
{% assign counted_repos = "" %}
{% for repo in repo_list %}
  {% if repo != "" %}
    {% if repo != prev %}
      {% if prev != "" %}
        {% assign counted_repos = counted_repos | append: prev | append: ":" | append: count | append: ";;;" %}
      {% endif %}
      {% assign prev = repo %}
      {% assign count = 1 %}
    {% else %}
      {% assign count = count | plus: 1 %}
    {% endif %}
  {% endif %}
{% endfor %}
{% if prev != "" %}
  {% assign counted_repos = counted_repos | append: prev | append: ":" | append: count | append: ";;;" %}
{% endif %}

{% assign repo_entries = counted_repos | split: ";;;" | sort %}

<div class="bar-chart">
{% for entry in repo_entries reversed %}
  {% if entry != "" %}
    {% assign parts = entry | split: ":" %}
    {% assign repo_name = parts[0] %}
    {% assign repo_n = parts[1] | plus: 0 %}
    {% assign pct = repo_n | times: 100 | divided_by: xref.total %}
    {% if pct < 5 %}{% assign pct = 5 %}{% endif %}
    <div class="bar-row">
      <div class="bar-label">
        <code>{{ repo_name }}</code>
        <span class="bar-count">{{ repo_n }}</span>
      </div>
      <div class="bar-track">
        <div class="bar-fill" style="width: {{ pct }}%"></div>
      </div>
    </div>
  {% endif %}
{% endfor %}
</div>

---

## Essay-to-Repo Table

<table class="connection-table">
  <thead>
    <tr>
      <th>Essay</th>
      <th>Repos</th>
    </tr>
  </thead>
  <tbody>
  {% for entry in xref.entries %}
    <tr>
      <td>
        {% assign slug = entry[0] | replace: ".md", "" %}
        {% for post in site.posts %}
          {% assign post_slug = post.date | date: "%Y-%m-%d" | append: "-" | append: post.slug %}
          {% if post_slug == slug %}
            <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
          {% endif %}
        {% endfor %}
      </td>
      <td>
        {% for repo in entry[1].related_repos %}
          <span class="repo-badge">{{ repo | split: "/" | last }}</span>
        {% endfor %}
        {% if entry[1].related_repos.size == 0 %}
          <span class="meta">none</span>
        {% endif %}
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>

---

## Organ Heatmap

{% assign organ_counts = "" %}
{% for entry in xref.entries %}
  {% for repo in entry[1].related_repos %}
    {% assign org_name = repo | split: "/" | first %}
    {% if org_name contains "organvm-i-" %}
      {% assign organ = "I Theoria" %}
    {% elsif org_name contains "organvm-ii-" %}
      {% assign organ = "II Poiesis" %}
    {% elsif org_name contains "organvm-iii-" %}
      {% assign organ = "III Ergon" %}
    {% elsif org_name contains "organvm-iv-" %}
      {% assign organ = "IV Taxis" %}
    {% elsif org_name contains "organvm-v-" %}
      {% assign organ = "V Logos" %}
    {% elsif org_name contains "organvm-vi-" %}
      {% assign organ = "VI Koinonia" %}
    {% elsif org_name contains "organvm-vii-" %}
      {% assign organ = "VII Kerygma" %}
    {% elsif org_name contains "meta-organvm" %}
      {% assign organ = "META" %}
    {% else %}
      {% assign organ = "Other" %}
    {% endif %}
    {% assign organ_counts = organ_counts | append: organ | append: "|||" %}
  {% endfor %}
{% endfor %}

{% assign organ_list = organ_counts | split: "|||" | sort %}
{% assign prev_o = "" %}
{% assign counted_organs = "" %}
{% for o in organ_list %}
  {% if o != "" %}
    {% if o != prev_o %}
      {% if prev_o != "" %}
        {% assign counted_organs = counted_organs | append: prev_o | append: ":" | append: o_count | append: ";;;" %}
      {% endif %}
      {% assign prev_o = o %}
      {% assign o_count = 1 %}
    {% else %}
      {% assign o_count = o_count | plus: 1 %}
    {% endif %}
  {% endif %}
{% endfor %}
{% if prev_o != "" %}
  {% assign counted_organs = counted_organs | append: prev_o | append: ":" | append: o_count | append: ";;;" %}
{% endif %}

{% assign organ_entries = counted_organs | split: ";;;" | sort %}

<div class="organ-heatmap">
{% for oe in organ_entries %}
  {% if oe != "" %}
    {% assign oparts = oe | split: ":" %}
    {% assign organ_name = oparts[0] %}
    {% assign organ_n = oparts[1] | plus: 0 %}
    <div class="organ-cell">
      <div class="organ-count">{{ organ_n }}</div>
      <div class="organ-name">{{ organ_name }}</div>
    </div>
  {% endif %}
{% endfor %}
</div>

---

<p class="meta" style="text-align: center;">Data sourced from <code>cross-references.json</code>, generated by the <a href="https://github.com/organvm-v-logos/essay-pipeline">essay-pipeline</a>.</p>
